<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Display</title>
    <style>
        /* Default body styling for non-war mode */
        body {
            margin: 0;
            padding: 0;
            background-color: transparent;
            font-family: 'Roboto Mono', monospace;
        }
        #table-stats {
            font-size: 30px;
            font-weight: 500;
            text-align: left;
            position: absolute;
            top: 20px;
            left: 20px;
        }

        /* Additional styling for war mode */
        body.war-mode {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        body.war-mode #table-stats {
            text-align: center;
            position: static;
        }
    </style>
</head>
<body>
    <div id="table-stats"></div>

    <script>
        async function fetchAndRenderData() {
            const urlParams = new URLSearchParams(window.location.search);
            const isWarMode = urlParams.has("war");

            // Apply or remove the `war-mode` class based on the presence of the &war parameter
            if (isWarMode) {
                document.body.classList.add("war-mode");
            } else {
                document.body.classList.remove("war-mode");
            }

            // Fetch and display table data (existing logic)
            const tableId = urlParams.get("tableid");
            if (!tableId) {
                document.getElementById("table-stats").innerHTML = "";
                return;
            }

            try {
                const tableResponse = await fetch(`https://mkw-table-bot-api.jprq.site/api/html/full_scores/${tableId}`);
                if (!tableResponse.ok) {
                    document.getElementById("table-stats").innerHTML = "";
                    return;
                }

                const tableHTML = await tableResponse.text();
                const tableContainer = document.getElementById("table-stats");
                tableContainer.innerHTML = tableHTML;
            } catch (error) {
                console.error("Error fetching table data:", error);
                document.getElementById("table-stats").innerHTML = "";
            }
        }

        document.addEventListener("DOMContentLoaded", fetchAndRenderData);
    </script>
</body>
</html>
